var B=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,g=(e,r,t)=>r in e?B(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,U=(e,r)=>{for(var t in r||(r={}))y.call(r,t)&&g(e,t,r[t]);if(b)for(var t of b(r))F.call(r,t)&&g(e,t,r[t]);return e},p=(e,r)=>{var t={};for(var o in e)y.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&b)for(var o of b(e))r.indexOf(o)<0&&F.call(e,o)&&(t[o]=e[o]);return t},x=(e,r,t)=>new Promise(((o,n)=>{var a=e=>{try{s(t.next(e))}catch(e){n(e)}},l=e=>{try{s(t.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,l);s((t=t.apply(e,r)).next())}));!function(){"use strict";var e;const r="undefined"!=typeof window?null==(e=window.navigator)?void 0:e.userAgent:"";r.includes("Chrome"),r.includes("AppleWebKit"),r.includes("Firefox");const t=e=>function(e){return new Promise(((r,t)=>{const o=new FileReader;o.onload=()=>r(o.result),o.onerror=()=>t(o.error),o.onabort=()=>t(new Error("Failed read blob to dataUrl")),o.readAsDataURL(e)}))}(e),o=self;o.onmessage=e=>x(this,null,(function*(){const r=e.data,n=r.rawUrl||r.url;try{const e=yield function(e){const r=e,{url:o,timeout:n,responseType:a}=r,l=p(r,["url","timeout","responseType"]),s=new AbortController,i=n?setTimeout((()=>s.abort()),n):void 0;return fetch(o,U({signal:s.signal},l)).then((e=>{if(!e.ok)throw new Error("Failed fetch, not 2xx response",{cause:e});switch(a){case"arrayBuffer":return e.arrayBuffer();case"dataUrl":return e.blob().then(t);default:return e.text()}})).finally((()=>clearTimeout(i)))}(r);o.postMessage({url:n,result:e})}catch(e){((...e)=>{console.warn("[modern-screenshot]",...e)})(e),o.postMessage({url:n})}}))}();